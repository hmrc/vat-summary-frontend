@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import models.viewModels.VatCertificateViewModel
@import views.templates.formatters.dates.DisplayDateRangeHelper.displayDate
@import views.html.templates.formatters.addresses._
@import views.html.templates.formatters.breadcrumbs._

@(serviceInfoContent: Html = HtmlFormat.empty, model: VatCertificateViewModel)(implicit messages: Messages, appConfig: config.AppConfig, request: Request[_], user: User)

@views.html.main_template(
  if(user.isAgent) messages("vatCertificate.agentTitle") else messages("vatCertificate.title"),
  appConfig = appConfig,
  user = Some(user),
  serviceInfoContent = serviceInfoContent
) {
    @if(!user.isAgent) {
        @navigationBreadcrumb(
            links = Map(
                appConfig.btaHomeUrl -> messages("breadcrumbs.bta"),
                controllers.routes.VatDetailsController.details().url -> messages("vatDetails.title")),
            currentPage = messages("vatCertificate.title")
        )
    } else {
        <a class="link-back" href='@controllers.routes.VatCertificateController.changeClientAction()'>@messages("base.back")</a>
    }
    <h1 class="heading-xlarge">@if(user.isAgent){@messages("vatCertificate.agentTitle")} else {@messages("vatCertificate.title")}</h1>

    <div class="cert-header">
        <img src='@routes.Assets.at("images/"+messages("vatCertificate.logo")+".png")' alt="HMRC Logo">
    </div>

    <div class="card-full-container column-full">
        <div class="column-two-thirds">
            <h2 class="heading-medium card-heading">@messages("vatCertificate.aboutYourRegistration.title")</h2>
        </div>
        <div class="column-full">
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr>
                        <td>@messages("vatCertificate.aboutYourRegistration.vrn")</td>
                        <td>@model.vrn</td>
                    </tr>
                    <tr>
                        <td>@messages("vatCertificate.aboutYourRegistration.registrationDate")</td>
                        <td>@{model.registrationDate.map(displayDate(_)).getOrElse(messages("common.notProvided"))}</td>
                    </tr>
                    <tr>
                        <td>@messages("vatCertificate.aboutYourRegistration.certificateDate")</td>
                        <td>@displayDate(model.certificateDate)</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="card-full-container column-full">
        <div class="card-body">
            <div class="column-two-thirds">
                <h2 class="card-heading heading-medium">@messages("vatCertificate.aboutTheBusiness.title")</h2>
            </div>
            <div class="column-full">
                <table>
                    <thead>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@messages("vatCertificate.aboutTheBusiness.businessName")</td>
                            <td>@{model.businessName.getOrElse(messages("common.notProvided"))}</td>
                        </tr>
                        <tr>
                            <td>@messages("vatCertificate.aboutTheBusiness.tradingName")</td>
                            <td>@{model.tradingName.getOrElse(messages("common.notProvided"))}</td>
                        </tr>
                        <tr>
                            <td>@messages("vatCertificate.aboutTheBusiness.businessType")</td>
                            <td>@messages(model.businessTypeMsgKey)</td>
                        </tr>
                        <tr>
                            <td>@messages("vatCertificate.aboutTheBusiness.tradeClassification")</td>
                            <td>@{model.tradeClassification}</td>
                        </tr>
                        <tr>
                            <td>@messages("vatCertificate.aboutTheBusiness.principalPlaceOfBusiness")</td>
                            <td>@fullAddress(model.ppob)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card-full-container column-full">
        <div class="column-two-thirds">
            <h2 class="heading-medium card-heading">@messages("vatCertificate.bankingDetails.title")</h2>
        </div>
        <div class="column-full">
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr>
                        <td>@messages("vatCertificate.bankingDetails.accountNumber")</td>
                        <td>@{model.accountNumber.getOrElse(messages("common.notProvided"))}</td>
                    </tr>
                    <tr>
                        <td>@messages("vatCertificate.bankingDetails.sortCode")</td>
                        <td>@{model.sortCode.getOrElse(messages("common.notProvided"))}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="card-full-container column-full">
        <div class="column-two-thirds">
            <h2 class="heading-medium card-heading">@messages("vatCertificate.returnDetails.title")</h2>
        </div>
        <div class="column-full">
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr>
                        <td>@messages("vatCertificate.returnDetails.returnDates")</td>
                        <td>@messages(model.returnPeriodMsgKey)</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    @if(user.isAgent){
        <p><a href="@routes.VatCertificateController.changeClientAction()">@messages("vatCertificate.backToClientOptions")</a></p>
        <p><a href="@routes.VatCertificateController.changeClient()">@messages("vatCertificate.changeClient")</a></p>
    }

    <button class="button" data-journey-click="@{if(user.isAgent)"agent_"}vat-certificate:print:certificate"
            onclick="javascript:window.print()">@messages("vatCertificate.print")</button>
}